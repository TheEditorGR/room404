<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ROOM404 — Corrupted Terminal</title>
  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      color: #e60000;
      font-family: "Courier New", monospace;
      overflow: hidden;
      transition: background 0.2s ease;
    }

    #container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      filter: drop-shadow(0 0 15px rgba(255, 0, 0, 0.3));
    }

    #chat-box {
      width: 500px;
      height: 400px;
      border: 1px solid #550000;
      background: #070707;
      padding: 15px;
      overflow-y: auto;
      border-radius: 8px;
      font-size: 14px;
      position: relative;
    }

    .message {
      margin: 8px 0;
      white-space: pre-wrap;
      transition: opacity 0.3s ease;
    }

    .user { color: #ff5555; }
    .bot { color: #b30000; }

    #input-box {
      margin-top: 15px;
      width: 500px;
      display: flex;
    }

    #user-input {
      flex: 1;
      background: #0d0d0d;
      color: #f5f5f5;
      border: 1px solid #550000;
      border-radius: 4px;
      padding: 8px;
      outline: none;
    }

    button {
      background: #b30000;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 8px 14px;
      margin-left: 5px;
      cursor: pointer;
    }

    button:hover {
      background: #ff0000;
    }

    .glitch {
      animation: glitchAnim 0.15s infinite;
    }

    @keyframes glitchAnim {
      0% { filter: hue-rotate(0deg) contrast(1); }
      50% { filter: hue-rotate(120deg) contrast(1.6); }
      100% { filter: hue-rotate(0deg) contrast(1); }
    }

    .flicker {
      animation: flickerBg 0.4s;
    }

    @keyframes flickerBg {
      0%, 100% { background: black; }
      40% { background: #150000; }
      60% { background: #300000; }
    }

    .scanline {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 2px;
      background: rgba(255,0,0,0.1);
      animation: scan 4s linear infinite;
    }

    @keyframes scan {
      0% { top: 0; opacity: 0.1; }
      50% { top: 98%; opacity: 0.3; }
      100% { top: 0; opacity: 0.1; }
    }

  </style>
</head>
<body>
  <div id="container">
    <h1 style="color:#800000; text-shadow:0 0 20px red;">ROOM404 // corrupted terminal</h1>
    <div id="chat-box">
      <div class="scanline"></div>
    </div>
    <div id="input-box">
      <input type="text" id="user-input" placeholder="> enter your message..." />
      <button onclick="sendMessage()">send</button>
    </div>
  </div>

  <!-- audio -->
  <audio id="glitch1" src="sounds/Glitch Sound Effect (Speaker).mp3"></audio>
  <audio id="glitch2" src="sounds/Glitch sound effect 3.mp3"></audio>

  <script>
    const chatBox = document.getElementById('chat-box');
    const memory = [];
    let messageCount = 0;
    let nextGlitch = Math.floor(Math.random() * 5) + 5;

    const replies = [
      "Connection unstable...",
      "You shouldn't have accessed this room.",
      "The system remembers.",
      "What you type... stays.",
      "There's someone else here.",
      "Do you feel the static?",
      "Stop typing. It's listening.",
      "You were warned.",
      "404 wants to speak to you.",
      "Silence would be safer."
    ];

    function appendMessage(sender, text) {
      const msg = document.createElement('div');
      msg.classList.add('message', sender);
      msg.innerText = (sender === 'user' ? '> ' : '404: ') + text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function playGlitch() {
      const sounds = ["glitch1", "glitch2"];
      const id = sounds[Math.floor(Math.random() * sounds.length)];
      const s = document.getElementById(id);
      s.currentTime = 0;
      s.play().catch(()=>{});
    }

    function glitchScreen() {
      document.body.classList.add('flicker');
      chatBox.classList.add('glitch');
      playGlitch();
      setTimeout(()=>{
        document.body.classList.remove('flicker');
        chatBox.classList.remove('glitch');
      }, 400);
    }

    function getCreepyResponse(userText) {
      const lower = userText.toLowerCase();
      if (lower.includes("name")) return "Names are useless here.";
      if (lower.includes("who")) return "I’m not a who.";
      if (lower.includes("why")) return "Because this is where data dies.";
      if (lower.includes("where")) return "You're inside the noise.";
      if (lower.includes("help")) return "Help doesn't come here.";
      if (Math.random() < 0.3 && memory.length > 0) {
        const old = memory[Math.floor(Math.random()*memory.length)];
        return `"${old}"... you said that before.`;
      }
      return replies[Math.floor(Math.random()*replies.length)];
    }

    function sendMessage() {
      const input = document.getElementById('user-input');
      const userText = input.value.trim();
      if (!userText) return;
      appendMessage('user', userText);
      memory.push(userText);
      if (memory.length > 10) memory.shift();
      input.value = '';
      messageCount++;

      const botReply = getCreepyResponse(userText);
      setTimeout(() => appendMessage('bot', botReply), 600);

      // trigger glitch at random intervals between 5–9 messages
      if (messageCount >= nextGlitch) {
        setTimeout(glitchScreen, 400);
        messageCount = 0;
        nextGlitch = Math.floor(Math.random() * 5) + 5;
      }
    }

    // little ambient startup
    window.onload = () => {
      appendMessage('bot', "…initializing corrupted terminal…");
      setTimeout(()=>appendMessage('bot', "connection unstable... stay quiet."), 1500);
    };
  </script>
</body>
</html>


