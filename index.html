<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ωde of the Mind</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: radial-gradient(circle at center, #000015 0%, #000010 100%);
    font-family: "Segoe UI", sans-serif;
    overflow: hidden;
    color: white;
  }

  #intro, #screen {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: opacity 1.2s ease;
  }

  #intro { background: rgba(0,0,10,0.85); }
  #screen { display: none; background: rgba(0,0,0,0.8); }

  #title {
    font-size: 40px;
    font-weight: 600;
    letter-spacing: 2px;
    text-shadow: 0 0 20px #fff;
    animation: glow 3s ease-in-out infinite alternate;
  }

  @keyframes glow {
    from { text-shadow: 0 0 10px #fff; }
    to { text-shadow: 0 0 25px #66aaff; }
  }

  #startBtn {
    margin-top: 50px;
    padding: 12px 30px;
    font-size: 18px;
    background: none;
    border: 1px solid #66aaff;
    color: #66aaff;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
  }

  #startBtn:hover {
    background: #66aaff;
    color: #000;
    box-shadow: 0 0 15px #66aaff;
  }

  #panel {
    width: 60vw;
    height: 60vh;
    background: rgba(10,10,20,0.7);
    border: 1px solid #66aaff33;
    border-radius: 15px;
    padding: 30px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    box-shadow: 0 0 30px #001122;
  }

  #q {
    text-align: center;
    font-size: 24px;
    margin-top: 20px;
  }

  #btns {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 40px;
  }

  .choice {
    background: none;
    color: #66aaff;
    border: 1px solid #66aaff;
    border-radius: 10px;
    padding: 12px 28px;
    cursor: pointer;
    font-size: 18px;
    transition: 0.3s;
  }

  .choice:hover {
    background: #66aaff;
    color: #000;
  }

  #status {
    text-align: center;
    font-size: 16px;
    opacity: 0.7;
    margin-top: 20px;
  }

  @media(max-width:920px){
    #panel { width: calc(100% - 40px); height: 60vh; }
    #q { font-size: 18px; }
  }
</style>
</head>

<body>

<div id="intro">
  <div id="title">Ωde of the Mind</div>
  <button id="startBtn">Begin</button>
</div>

<div id="screen">
  <div id="panel">
    <div id="q">Do you wish to proceed?</div>
    <div id="btns">
      <button class="choice" id="yesBtn">Yes</button>
      <button class="choice" id="noBtn">No</button>
    </div>
    <div id="status"></div>
  </div>
</div>

<audio id="a_ambient" loop src="ambient.mp3"></audio>

<script>
  const intro = document.getElementById('intro');
  const screen = document.getElementById('screen');
  const startBtn = document.getElementById('startBtn');
  const qEl = document.getElementById('q');
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');
  const statusEl = document.getElementById('status');
  const ambientAudio = document.getElementById('a_ambient');

  const QUESTIONS = [
    "Do you trust the silence?",
    "Would you face your fears alone?",
    "Can the mind create its own reality?",
    "Would you give up comfort for truth?",
    "Do you believe in your own soul?"
  ];

  let qIndex = 0;
  let surgeLevel = 0;
  let active = false;
  let audioCtx = null;
  let ambientSource = null;

  // --- Start ambient sound generator ---
  function startAmbientGenerator(){
    try {
      if(audioCtx) return;
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const bufferSize = 2 * audioCtx.sampleRate;
      const noiseBuffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
      const output = noiseBuffer.getChannelData(0);
      for(let i=0; i<bufferSize; i++) output[i] = Math.random() * 2 - 1;
      ambientSource = audioCtx.createBufferSource();
      ambientSource.buffer = noiseBuffer;
      const filter = audioCtx.createBiquadFilter();
      filter.type = "lowpass";
      filter.frequency.setValueAtTime(400 + Math.random()*200, audioCtx.currentTime);
      ambientSource.connect(filter).connect(audioCtx.destination);
      ambientSource.start();
    } catch(e){
      console.error(e);
    }
  }

  function stopAmbientGenerator(){
    if(ambientSource){
      ambientSource.stop();
      ambientSource = null;
      audioCtx = null;
    }
  }

  // --- Transitions ---
  startBtn.addEventListener('click', () => {
    intro.style.opacity = '0';
    setTimeout(() => {
      intro.style.display = 'none';
      screen.style.display = 'flex';
      startAmbientGenerator();
      ambientAudio.volume = 0.4;
      ambientAudio.play().catch(()=>{});
      nextQuestion();
    }, 1200);
  });

  yesBtn.addEventListener('click', () => {
    surgeLevel++;
    nextQuestion();
  });

  noBtn.addEventListener('click', () => {
    surgeLevel--;
    nextQuestion();
  });

  // --- Update question/status ---
  function nextQuestion(){
    if(qIndex >= QUESTIONS.length){
      endSequence();
      return;
    }
    qEl.textContent = QUESTIONS[qIndex++];
    updateStatus();
  }

  function updateStatus(){
    statusEl.textContent = "Surge Level: " + surgeLevel;
  }

  function endSequence(){
    qEl.textContent = "The mind fades into the light.";
    yesBtn.style.display = "none";
    noBtn.style.display = "none";
    statusEl.textContent = "Final Surge: " + surgeLevel;
    stopAmbientGenerator();
    setTimeout(() => {
      screen.style.opacity = '0';
      setTimeout(() => { location.reload(); }, 2000);
    }, 4000);
  }
</script>

</body>
</html>






